(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ca8edcd"],{"02a6":function(e,t,a){"use strict";a("61be")},3702:function(e,t,a){"use strict";a("7a21")},"4c71":function(e,t,a){},"575d":function(e,t,a){"use strict";a("4c71")},"61be":function(e,t,a){},"742e":function(e,t,a){"use strict";a("b042")},"7a21":function(e,t,a){},"93c0":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"visual-data-pannel dark-scroll-bar dark",class:{close:!e.isCollapsePanel}},[a("i",{staticClass:"icon trigger-btn",class:e.isCollapsePanel?"bl-icon-nav-unfold":"bl-icon-nav-fold",on:{click:function(t){e.isCollapsePanel=!e.isCollapsePanel}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapsePanel,expression:"!isCollapsePanel"}],staticClass:"data-tip-show"},[e._v("数据")]),a("header",{directives:[{name:"show",rawName:"v-show",value:e.isCollapsePanel,expression:"isCollapsePanel"}]},[a("div",{staticClass:"font-bold fs-16px"},[e._v("数据")]),a("Dropdown",{staticClass:"date-set-drowndown mt-2"},[a("div",{staticClass:"flex-justify-between selected-set"},[a("p",[e._v(e._s(e.selectedDateSet.name))]),a("i",{staticClass:"bl-icon-arrow-down"})]),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("ul",{staticClass:"data-set-list"},[a("div",{staticClass:"flex-justify-between flex-align-items-center mb-1"},[a("Button",{attrs:{type:"text"},on:{click:function(t){e.isShowDataSetModal=!0}}},[e._v(" 预览数据 ")]),a("Icon",{attrs:{custom:"bl-icon-refresh"}})],1),a("Input",{staticClass:"mb-8px",attrs:{placeholder:"请搜索",clearable:"",suffix:"ios-search"},model:{value:e.searchSetValue,callback:function(t){e.searchSetValue=t},expression:"searchSetValue"}}),e._l(e.filterDateSets,(function(t,s){return a("li",{key:s,class:{actived:t.id===e.selectedDateSet.id},on:{click:function(a){e.selectedDateSet=t}}},[e._v(" "+e._s(t.name)+" ")])}))],2)])],1),a("Input",{staticClass:"mt-2",attrs:{placeholder:"请输入关键字",clearable:"",suffix:"ios-search"},on:{"on-enter":e.getDataTreeList},model:{value:e.searchDataValue,callback:function(t){e.searchDataValue=t},expression:"searchDataValue"}})],1),a("section",{directives:[{name:"show",rawName:"v-show",value:e.isCollapsePanel,expression:"isCollapsePanel"}],staticClass:"data-tree-contatiner"},[a("ComDataTree",{attrs:{category:"dimension",treeList:e.dimensionTreeList}}),a("ComDataTree",{attrs:{category:"measure",treeList:e.measureTreeList}})],1),a("DataSetModal",{attrs:{value:e.isShowDataSetModal},on:{"update:value":function(t){e.isShowDataSetModal=t}}})],1)},i=[],n=a("d4ec"),l=a("bee2"),r=a("262e"),o=a("2caf"),c=(a("d81d"),a("a630"),a("3ca3"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("b0c0"),a("9ab4")),d=a("1b40"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{width:"992",title:"数据集",value:e.isShow,closable:!0,"footer-hide":!0,"mask-closable":!0,"class-name":"bolean-modal"},on:{"on-cancel":e.closeModal}},[a("div",{staticClass:"data-set-detail flex-justify-start"},[a("aside",[a("Input",{staticClass:"mb-8px",attrs:{placeholder:"请搜索",clearable:"",suffix:"ios-search"},model:{value:e.searchSetValue,callback:function(t){e.searchSetValue=t},expression:"searchSetValue"}}),a("ul",{staticClass:"data-set-list"},e._l(e.filterDateSets,(function(t,s){return a("li",{key:s,class:{actived:t.id===e.selectedDateSetID},on:{click:function(a){e.selectedDateSetID=t.id}}},[e._v(" "+e._s(t.name)+" ")])})),0)],1),a("main",[a("Table",{ref:"bltable",attrs:{columns:e.tableColumns,height:530,data:e.tableList}})],1)])])},f=[],m=function(e){Object(r["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.selectedDateSetID=1,e.searchSetValue="",e.dataSets=Array.from({length:10}).map((function(e,t){return{name:"数据集".concat(t+1),id:t+1}})),e.tableColumns=Array.from({length:16}).map((function(e,t){return t<8?{title:"维度".concat(t+1),key:"key".concat(t),minWidth:100}:{title:"度量".concat(t+1),key:"key".concat(t),minWidth:100}})),e.tableList=[],e}return Object(l["a"])(a,[{key:"filterDateSets",get:function(){var e=this;return this.dataSets.filter((function(t){return t.name.includes(e.searchSetValue)}))}},{key:"closeModal",value:function(){this.isShow=!1}}]),a}(d["h"]);Object(c["a"])([Object(d["e"])("value")],m.prototype,"isShow",void 0),m=Object(c["a"])([d["a"]],m);var h=m,p=h,b=(a("575d"),a("2877")),v=Object(b["a"])(p,u,f,!1,null,"5af2779e",null),y=v.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-tree-wrapper",class:e.category+"-tree"},[a("p",{staticClass:"mb-8px data-title"},[e._v(" "+e._s("dimension"===e.category?"维度":"度量")+" （"+e._s(e.treeList.length)+"） ")]),a("ul",{staticClass:"data-tree-list hide-scroll-bar"},[a("draggable",{attrs:{group:e.dragSender,animation:"300",sort:!1,forceFallback:!0,"chosen-class":"item-chosen","drag-class":"item-fallback",filter:".sub-tree"},model:{value:e.treeList,callback:function(t){e.treeList=t},expression:"treeList"}},e._l(e.treeList,(function(t){return a("li",{key:t.field,class:e.category+"-li",attrs:{field:t.field,category:t.category}},[a("div",{staticClass:"data-item",class:e.category+"-item"},[a("i",{class:e.filedTypeIconMap[t.fieldType]}),a("span",{staticClass:"ml-4px"},[e._v(e._s(t.name))])]),t.chrildren&&t.chrildren.length?a("draggable",{staticClass:"sub-tree",attrs:{group:e.dragSender,sort:!1,animation:"300","chosen-class":"item-chosen"},model:{value:t.chrildren,callback:function(a){e.$set(t,"chrildren",a)},expression:"item.chrildren"}},[e._l(t.chrildren,(function(t){return[a("div",{key:t.field,staticClass:"data-item",class:e.category+"-item",attrs:{field:t.field,category:t.category}},[a("i",{class:e.filedTypeIconMap[t.fieldType]}),a("span",{staticClass:"ml-4px"},[e._v(e._s(t.name))])])]}))],2):e._e()],1)})),0)],1)])},_=[],C=a("b76a"),w=a.n(C),k=a("ffcb"),j=function(e){Object(r["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.filedTypeIconMap=k["d"],e.dragSender={name:"dragReceiver",pull:"clone",put:!1},e}return Object(l["a"])(a)}(d["h"]);Object(c["a"])([Object(d["d"])()],j.prototype,"treeList",void 0),Object(c["a"])([Object(d["d"])({default:"dimension"})],j.prototype,"category",void 0),j=Object(c["a"])([Object(d["a"])({components:{draggable:w.a}})],j);var S=j,O=S,D=(a("742e"),Object(b["a"])(O,g,_,!1,null,"42f678c8",null)),x=D.exports,T=function(e){Object(r["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.isCollapsePanel=!1,e.isShowDataSetModal=!1,e.searchSetValue="",e.selectedDateSet={name:"请选择数据集",id:0},e.dataSets=Array.from({length:10}).map((function(e,t){return{name:"数据集".concat(t+1),id:t+1}})),e.searchDataValue="",e.dimensionTreeList=[],e.measureTreeList=[],e}return Object(l["a"])(a,[{key:"filterDateSets",get:function(){var e=this;return this.dataSets.filter((function(t){return t.name.includes(e.searchSetValue)}))}},{key:"created",value:function(){this.getDataTreeList()}},{key:"getDataTreeList",value:function(){var e=this,t=Array.from({length:7}).map((function(e,t){return{name:"维度字段".concat(t+1),field:"dimension_field".concat(t+1),fieldType:"string",category:"dimension",chrildren:[]}}));t.push({name:"更新时间",field:"dimension_field8",fieldType:"datetime",category:"dimension",chrildren:[{name:"更新时间（year）",field:"dimension_field8_year",fieldType:"year",category:"dimension"},{name:"更新时间（month）",field:"dimension_field8_year_month",fieldType:"year-month",category:"dimension"},{name:"更新时间（day）",field:"dimension_field8_year_month_day",fieldType:"year-month-day",category:"dimension"},{name:"更新时间（hour）",field:"dimension_field8_hour",fieldType:"hour",category:"dimension"},{name:"更新时间（minute）",field:"dimension_field8_hour_minute",fieldType:"hour-minute",category:"dimension"},{name:"更新时间（second）",field:"dimension_field8_hour_minute_second",fieldType:"hour-minute-second",category:"dimension"}]}),this.dimensionTreeList=t.filter((function(t){return t.name.includes(e.searchDataValue)}));var a=Array.from({length:5}).map((function(e,t){return{name:"度量字段".concat(t+1),field:"measure_field".concat(t+1),fieldType:"number",category:"measure",chrildren:[]}}));this.measureTreeList=a.filter((function(t){return t.name.includes(e.searchDataValue)}))}},{key:"onRightTabChange",value:function(){this.isCollapsePanel="data"===this.rightTabName}}]),a}(d["h"]);Object(c["a"])([Object(d["d"])()],T.prototype,"rightTabName",void 0),Object(c["a"])([Object(d["i"])("rightTabName")],T.prototype,"onRightTabChange",null),T=Object(c["a"])([Object(d["a"])({components:{DataSetModal:y,ComDataTree:x}})],T);var L=T,I=L,M=(a("02a6"),Object(b["a"])(I,s,i,!1,null,"78d9d7e1",null));t["a"]=M.exports},"970a":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"data-related-wrap"},[e._t("default"),a("ComFilter",e._b({},"ComFilter",e.$attrs,!1)),a("section",{},[a("bl-form",{staticClass:"attr-form-wrap update-rate-form",attrs:{formItems:e.formItems,defaultValue:e.modelData,"label-width":70,itemClass:"mb-1",labelColon:!1,labelPosition:"left",itemSize:"small"}},[a("div",{staticClass:"flex-jusfity-start",attrs:{slot:"regreshRate"},slot:"regreshRate"},[a("InputNumber",{staticStyle:{width:"112px"},attrs:{precision:0,min:0,max:3600,size:"small","active-change":!1},model:{value:e.modelData.refreshTime,callback:function(t){e.$set(e.modelData,"refreshTime",t)},expression:"modelData.refreshTime"}}),a("Select",{staticStyle:{width:"60px","margin-left":"4px"},attrs:{size:"small",transfer:"","transfer-class-name":"dark"},model:{value:e.modelData.refreshUnit,callback:function(t){e.$set(e.modelData,"refreshUnit",t)},expression:"modelData.refreshUnit"}},[a("Option",{attrs:{value:"minute"}},[e._v("分")]),a("Option",{attrs:{value:"second"}},[e._v("秒")])],1)],1)])],1),a("footer",{staticClass:"update-btn"},[e._v("更新数据")])],2)},i=[],n=a("d4ec"),l=a("bee2"),r=a("262e"),o=a("2caf"),c=a("9ab4"),d=a("1b40"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"config-block-wrap"},[a("p",{staticClass:"title"},[e._v("过滤器")]),a("ul",{staticClass:"mt-8px"},[a("draggable",{staticClass:"drag-receiver-wrap",attrs:{group:e.dragReceiver,animation:"200"},on:{add:e.onFilter},model:{value:e.addedFilterList,callback:function(t){e.addedFilterList=t},expression:"addedFilterList"}},[e._l(e.addedFilterList,(function(t,s){return a("div",{key:s},[a("Dropdown",{staticStyle:{width:"100%"},attrs:{trigger:"click",transfer:"",placement:"bottom-start","transfer-class-name":"dark dark-scroll-bar"}},[a("li",{staticClass:"added-item",class:t.category},[a("p",{staticClass:"show-info ellipsis-1"},[a("i",{class:e.filedTypeIconMap[t.fieldType]}),a("span",{staticClass:"ml-4px data-name"},[e._v(" "+e._s(t.name)+" ")])]),a("span",{staticClass:"operation-icon"},[a("i",{staticClass:"bl-icon-delete",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),e.onDeleteItem(t)}}}),a("i",{staticClass:"bl-icon-arrow-down ml-4px"})])]),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{nativeOn:{click:function(a){return e.onFilterSettings(t)}}},[e._v(" 过滤 ")]),"measure"===t.category?a("Dropdown",{attrs:{placement:"right-start",transfer:"","transfer-class-name":"dark dark-scroll-bar"}},[a("DropdownItem",[e._v(" 聚合方式 "),a("Icon",{attrs:{type:"ios-arrow-forward"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.aggregationMenuList,(function(t){return a("DropdownItem",{key:t.value},[e._v(" "+e._s(t.label)+" ")])})),1)],1):e._e()],1)],1)],1)})),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.addedFilterList.length,expression:"!addedFilterList.length"}],staticClass:"no-data"},[a("i",{staticClass:"bl-icon-input"}),a("span",[e._v("请拖入数据字段")])])],2)],1),a("ComFilterSettingsModal",{attrs:{value:e.isShowFilterModal,dataInfo:e.currentFilterInfo},on:{"update:value":function(t){e.isShowFilterModal=t}}})],1)},f=[],m=(a("45fc"),a("d3b7"),a("4de4"),a("d81d"),a("b76a")),h=a.n(m),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{width:"480",title:"过滤条件",value:e.isShow,closable:!0,"class-name":"bolean-modal"},on:{"on-cancel":e.closeModal}},[e._v(" 待完善。。。 "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.closeModal}},[e._v("取消")]),a("bl-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)])},b=[],v=a("5530"),y=function(e){Object(r["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.modelInfo={},e.formValidators={test:{required:!0,rule:{length:[1,32]}}},e}return Object(l["a"])(a,[{key:"formItems",get:function(){return[{key:"name",label:"原始名称",bltype:"slot"},{key:"test",label:"显示名"}]}},{key:"onModalShow",value:function(){this.isShow&&(this.modelInfo=Object(v["a"])({},this.dataInfo))}},{key:"closeModal",value:function(){this.isShow=!1}},{key:"save",value:function(){}}]),a}(d["h"]);Object(c["a"])([Object(d["e"])("value")],y.prototype,"isShow",void 0),Object(c["a"])([Object(d["d"])()],y.prototype,"dataInfo",void 0),Object(c["a"])([Object(d["i"])("isShow")],y.prototype,"onModalShow",null),y=Object(c["a"])([d["a"]],y);var g=y,_=g,C=a("2877"),w=Object(C["a"])(_,p,b,!1,null,"3f1d6298",null),k=w.exports,j=a("ffcb"),S=function(e){Object(r["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.addedFilterList=[],e.isShowFilterModal=!1,e.currentFilterInfo={},e.filedTypeIconMap=j["d"],e.aggregationMenuList=[{label:"无聚合",value:"none"},{label:"求和",value:"sum"},{label:"平均值",value:"average"},{label:"计数",value:"count"},{label:"去重计数",value:"dedup-count"},{label:"最大值",value:"max"},{label:"最小值",value:"min"}],e}return Object(l["a"])(a,[{key:"dragReceiver",get:function(){var e=this;return{name:"dragReceiver",put:function(t,a,s){var i=s.getAttribute("field"),n=s.getAttribute("category"),l=e.addedFilterList.some((function(e){return e["field"]===i&&e["category"]===n}));return!l}}}},{key:"dataConfigs",get:function(){return this.$attrs.componentData["dataConfigs"]}},{key:"onFilter",value:function(){this.updateConfigData()}},{key:"onDeleteItem",value:function(e){this.addedFilterList=this.addedFilterList.filter((function(t){return t["field"]!==e["field"]})),this.updateConfigData()}},{key:"updateConfigData",value:function(){this.dataConfigs["filters"]=this.addedFilterList.map((function(e){return e["field"]}))}},{key:"onFilterSettings",value:function(e){this.isShowFilterModal=!0,this.currentFilterInfo=e}}]),a}(d["h"]);S=Object(c["a"])([Object(d["a"])({components:{draggable:h.a,ComFilterSettingsModal:k}})],S);var O=S,D=O,x=Object(C["a"])(D,u,f,!1,null,null,null),T=x.exports,L=function(e){Object(r["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.modelData={autoRefresh:!1,refreshTime:10,refreshUnit:"second"},e}return Object(l["a"])(a,[{key:"formItems",get:function(){return[{key:"autoRefresh",label:"自动刷新",bltype:"single-checkbox"},{key:"regreshRate",label:"刷新频率",bltype:"slot",isHidden:!this.modelData.autoRefresh},{key:"size",label:"结果展示",bltype:"inputnumber",min:1,max:1e3}]}}]),a}(d["h"]);L=Object(c["a"])([Object(d["a"])({components:{ComFilter:T}})],L);var I=L,M=I,F=(a("3702"),Object(C["a"])(M,s,i,!1,null,"2cf098f2",null));t["a"]=F.exports},b042:function(e,t,a){}}]);